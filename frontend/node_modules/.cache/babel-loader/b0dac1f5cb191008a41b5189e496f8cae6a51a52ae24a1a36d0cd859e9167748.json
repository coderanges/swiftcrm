{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Table,Button,Card,Row,Col,Form,InputGroup}from'react-bootstrap';import{Link}from'react-router-dom';import{contactService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Contacts=()=>{const[contacts,setContacts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{const fetchContacts=async()=>{try{setLoading(true);const response=await contactService.getContacts();setContacts(response.data.contacts);setError(null);}catch(err){console.error('Error fetching contacts:',err);setError('Failed to load contacts. Please try again later.');}finally{setLoading(false);}};fetchContacts();},[]);// Filter contacts based on search term\nconst filteredContacts=contacts.filter(contact=>{var _contact$company,_contact$phone;return contact.name.toLowerCase().includes(searchTerm.toLowerCase())||contact.email.toLowerCase().includes(searchTerm.toLowerCase())||((_contact$company=contact.company)===null||_contact$company===void 0?void 0:_contact$company.toLowerCase().includes(searchTerm.toLowerCase()))||((_contact$phone=contact.phone)===null||_contact$phone===void 0?void 0:_contact$phone.toLowerCase().includes(searchTerm.toLowerCase()));});const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this contact?')){try{await contactService.deleteContact(id);setContacts(contacts.filter(contact=>contact.id!==id));}catch(err){console.error('Error deleting contact:',err);setError('Failed to delete contact. Please try again later.');}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"spinner-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Contacts\"}),/*#__PURE__*/_jsx(Link,{to:\"/contacts/new\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"+ Add Contact\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Search contacts...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:()=>setSearchTerm(''),children:\"Clear\"})]})})}),filteredContacts.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredContacts.map(contact=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:contact.name}),/*#__PURE__*/_jsx(\"td\",{children:contact.email}),/*#__PURE__*/_jsx(\"td\",{children:contact.phone}),/*#__PURE__*/_jsx(\"td\",{children:contact.company}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Link,{to:`/contacts/${contact.id}`,children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"info\",children:\"View\"})}),/*#__PURE__*/_jsx(Link,{to:`/contacts/${contact.id}/edit`,children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"secondary\",children:\"Edit\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"danger\",onClick:()=>handleDelete(contact.id),children:\"Delete\"})]})})]},contact.id))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-3\",children:searchTerm?'No contacts matching your search.':'No contacts found. Add a contact to get started.'})]})})]});};export default Contacts;","map":{"version":3,"names":["React","useState","useEffect","Container","Table","Button","Card","Row","Col","Form","InputGroup","Link","contactService","jsx","_jsx","jsxs","_jsxs","Contacts","contacts","setContacts","loading","setLoading","error","setError","searchTerm","setSearchTerm","fetchContacts","response","getContacts","data","err","console","filteredContacts","filter","contact","_contact$company","_contact$phone","name","toLowerCase","includes","email","company","phone","handleDelete","id","window","confirm","deleteContact","className","children","role","to","variant","Body","Control","placeholder","value","onChange","e","target","onClick","length","responsive","hover","map","size"],"sources":["/root/dev/swiftcrm/frontend/src/pages/Contacts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Table, Button, Card, Row, Col, Form, InputGroup } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { contactService } from '../services/api';\nimport { Contact } from '../types';\n\nconst Contacts: React.FC = () => {\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    const fetchContacts = async () => {\n      try {\n        setLoading(true);\n        const response = await contactService.getContacts();\n        setContacts(response.data.contacts);\n        setError(null);\n      } catch (err) {\n        console.error('Error fetching contacts:', err);\n        setError('Failed to load contacts. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchContacts();\n  }, []);\n\n  // Filter contacts based on search term\n  const filteredContacts = contacts.filter(contact => \n    contact.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    contact.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    contact.company?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    contact.phone?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleDelete = async (id: number) => {\n    if (window.confirm('Are you sure you want to delete this contact?')) {\n      try {\n        await contactService.deleteContact(id);\n        setContacts(contacts.filter(contact => contact.id !== id));\n      } catch (err) {\n        console.error('Error deleting contact:', err);\n        setError('Failed to delete contact. Please try again later.');\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"spinner-container\">\n        <div className=\"spinner-border text-primary\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Container>\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Contacts</h1>\n        <Link to=\"/contacts/new\">\n          <Button variant=\"primary\">+ Add Contact</Button>\n        </Link>\n      </div>\n\n      {error && (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          {error}\n        </div>\n      )}\n\n      <Card className=\"mb-4\">\n        <Card.Body>\n          <Row className=\"mb-3\">\n            <Col>\n              <InputGroup>\n                <Form.Control\n                  placeholder=\"Search contacts...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n                {searchTerm && (\n                  <Button \n                    variant=\"outline-secondary\" \n                    onClick={() => setSearchTerm('')}\n                  >\n                    Clear\n                  </Button>\n                )}\n              </InputGroup>\n            </Col>\n          </Row>\n\n          {filteredContacts.length > 0 ? (\n            <Table responsive hover>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Email</th>\n                  <th>Phone</th>\n                  <th>Company</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredContacts.map(contact => (\n                  <tr key={contact.id}>\n                    <td>{contact.name}</td>\n                    <td>{contact.email}</td>\n                    <td>{contact.phone}</td>\n                    <td>{contact.company}</td>\n                    <td>\n                      <div className=\"d-flex gap-2\">\n                        <Link to={`/contacts/${contact.id}`}>\n                          <Button size=\"sm\" variant=\"info\">View</Button>\n                        </Link>\n                        <Link to={`/contacts/${contact.id}/edit`}>\n                          <Button size=\"sm\" variant=\"secondary\">Edit</Button>\n                        </Link>\n                        <Button \n                          size=\"sm\" \n                          variant=\"danger\" \n                          onClick={() => handleDelete(contact.id)}\n                        >\n                          Delete\n                        </Button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n          ) : (\n            <div className=\"text-center p-3\">\n              {searchTerm ? 'No contacts matching your search.' : 'No contacts found. Add a contact to get started.'}\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n    </Container>\n  );\n};\n\nexport default Contacts; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}